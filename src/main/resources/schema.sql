DROP TABLE IF EXISTS users CASCADE;
DROP TABLE IF EXISTS mobiles CASCADE;
DROP TABLE IF EXISTS emails CASCADE;
DROP TABLE IF EXISTS accounts CASCADE;



CREATE TABLE IF NOT EXISTS users (
id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY NOT NULL,
name VARCHAR NOT NULL,
birthday TIMESTAMP NOT NULL,
login VARCHAR NOT NULL,
password VARCHAR NOT NULL,
CONSTRAINT UQ_LOGIN UNIQUE (login)
);

CREATE TABLE IF NOT EXISTS mobiles (
id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY NOT NULL,
user_id BIGINT NOT NULL,
number VARCHAR NOT NULL,
CONSTRAINT fk_user FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,
CONSTRAINT UQ_NUMBER UNIQUE (number)
);

CREATE TABLE IF NOT EXISTS emails (
id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY NOT NULL,
user_id BIGINT NOT NULL,
email VARCHAR NOT NULL,
CONSTRAINT fk_user FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,
CONSTRAINT UQ_EMAiL UNIQUE (email)
);

CREATE TABLE IF NOT EXISTS accounts (
id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY NOT NULL,
user_id BIGINT NOT NULL,
amount BIGINT NOT NULL,
update_amount_time TIMESTAMP NOT NULL,
CONSTRAINT fk_user FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
);